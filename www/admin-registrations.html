<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Administration des Inscriptions - ES Trappes</title>
    <link rel="stylesheet" href="./FichiersCSS/adminStyle.css" />
    <link rel="stylesheet" href="./FichiersCSS/admin-registrations.css" />
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Gestion des Inscriptions</h1>
        <nav>
          <a
            href="cotisations_membres.html"
            class="restricted-link"
            data-roles="admin,superadmin"
            >Gestion des Membres</a
          >
          |
          <a
            href="salaires_employes.html"
            class="restricted-link"
            data-roles="admin,superadmin"
            >Gestion des Employés</a
          >
          |
          <a
            href="admin-registrations.html"
            class="restricted-link"
            data-roles="admin,superadmin"
            >Gestion des inscriptions</a
          >
          |
          <a
            href="ActualitesAdmin.html"
            class="restricted-link"
            data-roles="adminCom, superadmin"
            >Gestion des Actualités</a
          >
          <button id="logoutBtn" class="btn btn-danger">Déconnexion</button>
        </nav>
      </div>

      <div class="filters">
        <select id="statusFilter">
          <option value="" selected>Tous les statuts</option>
          <option value="attente">En attente</option>
          <option value="accepté">Acceptés</option>
          <option value="refusé">Refusés</option>
        </select>
        <select id="typeFilter">
          <option value="">Tous les types</option>
          <option value="nouvelle">Nouvelle inscription</option>
          <option value="renouvellement">Renouvellement</option>
          <option value="mutation">Mutation</option>
        </select>
      </div>

      <div class="registrations-table">
        <table>
          <thead>
            <tr>
              <th>Nom</th>
              <th>Prénom</th>
              <th>Type</th>
              <th>Statut</th>
              <th>Statut du paiement</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="registrationsTableBody">
            <!-- Données remplis par JavaScript -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modal pour les détails -->
    <div id="detailsModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Détails de l'inscription</h2>
        <div id="registrationDetails">
          <!-- Détails remplis par JavaScript -->
        </div>
      </div>
    </div>

    <!-- Modal pour le prix de la licence mutation -->
    <div id="licencePriceModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close" id="closeLicenceModal">&times;</span>
        <h2>Prix de la licence pour mutation</h2>
        <p>Veuillez indiquer le prix de la licence pour cette mutation :</p>
        <div>
          <input
            type="number"
            id="licencePrice"
            min="0"
            step="0.01"
            placeholder="Prix en €"
            class="form-control"
          />
          <input type="hidden" id="registrationIdForPrice" />
          <div class="mt-3">
            <button class="btn btn-primary" id="confirmLicencePrice">
              Confirmer et envoyer le lien de paiement
            </button>
            <button class="btn btn-secondary" id="cancelLicencePrice">
              Annuler
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="./FichiersJS/admin-registration.js"></script>
  </body>
</html>
